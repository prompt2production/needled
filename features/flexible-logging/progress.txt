---
Story: FLEX-001 Add updatedAt fields to database schema
Completed: 2026-01-24T06:18:00Z
Files changed: prisma/schema.prisma, prisma/migrations/20260124000001_add_updatedat_fields/migration.sql
Notes: Added updatedAt DateTime @updatedAt to WeighIn and Injection models. Migration deployed successfully. Prisma client types already had the fields.
---
---
Story: FLEX-002 Create date validation schema
Completed: 2026-01-24T06:20:00Z
Files changed: src/lib/validations/log-date.ts, tests/unit/validations/log-date.test.ts
Notes: Created logDateSchema that validates dates in YYYY-MM-DD format, rejects future dates and dates more than 90 days in the past.
---
---
Story: FLEX-003 Update weigh-in POST to accept date parameter
Completed: 2026-01-24T06:23:00Z
Files changed: src/lib/validations/weigh-in.ts, src/app/api/weigh-ins/route.ts, tests/unit/validations/weigh-in.test.ts, tests/unit/api/weigh-ins.test.ts
Notes: Added optional date field to weigh-in schema using logDateSchema. Removed same-week restriction (409 conflict). Multiple weigh-ins per week now allowed.
---
---
Story: FLEX-004 Add hasWeighedThisWeek to weigh-in latest API
Completed: 2026-01-24T06:25:00Z
Files changed: src/app/api/weigh-ins/latest/route.ts, tests/unit/api/weigh-ins-latest.test.ts
Notes: Added hasWeighedThisWeek boolean to response. canWeighIn is now always true. hasWeighedThisWeek indicates whether user has logged a weigh-in in current week.
---
---
Story: FLEX-005 Create PATCH endpoint for weigh-ins
Completed: 2026-01-24T06:27:00Z
Files changed: src/app/api/weigh-ins/[id]/route.ts, src/lib/validations/weigh-in.ts, tests/unit/api/weigh-ins-id.test.ts
Notes: Created PATCH endpoint with ownership validation. Added updateWeighInSchema. Returns 404 for not found or wrong user, 400 for invalid data, 200 with updated entry on success.
---
---
Story: FLEX-006 Create DELETE endpoint for weigh-ins
Completed: 2026-01-24T06:27:00Z
Files changed: src/app/api/weigh-ins/[id]/route.ts, tests/unit/api/weigh-ins-id.test.ts
Notes: Created DELETE endpoint with ownership validation. Returns 404 for not found or wrong user, 204 No Content on successful deletion.
---
---
Story: FLEX-007 Add date picker to weigh-in dialog
Completed: 2026-01-24T06:30:00Z
Files changed: src/components/weigh-in/WeighInInput.tsx, src/components/weigh-in/WeighInCard.tsx, src/components/weigh-in/WeighInCardConnected.tsx, src/components/ui/calendar.tsx, src/components/ui/popover.tsx
Notes: Added shadcn Calendar and Popover components. Added date picker above weight input, defaults to today, disables future dates and dates older than 90 days. Form now submits date alongside weight.
---
---
Story: FLEX-008 Show encouragement message for multiple weigh-ins
Completed: 2026-01-24T06:30:00Z
Files changed: src/components/weigh-in/WeighInInput.tsx, src/components/weigh-in/WeighInCardConnected.tsx
Notes: Added hasWeighedThisWeek prop to WeighInInput. When true, displays muted info message about multiple entries being fine but weekly tracking working best.
---
---
Story: FLEX-009 Add edit functionality to weigh-in history
Completed: 2026-01-24T06:33:00Z
Files changed: src/components/weigh-in/WeighInHistoryItem.tsx, src/components/weigh-in/WeighInEditDialog.tsx, src/components/weigh-in/index.ts, src/app/weigh-in/page.tsx
Notes: Created WeighInHistoryItem component with edit button. WeighInEditDialog pre-fills with existing values. Calls PATCH endpoint, shows toast on success/error.
---
---
Story: FLEX-010 Add delete functionality to weigh-in history
Completed: 2026-01-24T06:33:00Z
Files changed: src/components/weigh-in/WeighInHistoryItem.tsx
Notes: Added delete button with AlertDialog confirmation showing date and weight. Calls DELETE endpoint, shows toast on success, refreshes list.
---
