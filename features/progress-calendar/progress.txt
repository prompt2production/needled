---
Story: CAL-001 Create calendar validation schemas
Completed: 2026-01-23T21:06:00Z
Files changed: src/lib/validations/calendar.ts
Notes: Created Zod schemas for calendar month params, day params, month response, and day response. All schemas exported with TypeScript types.
---
---
Story: CAL-002 Create GET /api/calendar/[year]/[month] endpoint
Completed: 2026-01-23T21:07:00Z
Files changed: src/app/api/calendar/[year]/[month]/route.ts
Notes: API endpoint queries DailyHabit, WeighIn, and Injection for the month date range. Returns formatted date strings (YYYY-MM-DD) for each entry.
---
---
Story: CAL-003 Create GET /api/calendar/day/[date] endpoint
Completed: 2026-01-23T21:08:00Z
Files changed: src/app/api/calendar/day/[date]/route.ts
Notes: API endpoint returns habit, weighIn (with change from previous), and injection data for a specific day. All fields nullable when data doesn't exist.
---
---
Story: CAL-004 Add unit tests for calendar API endpoints
Completed: 2026-01-23T21:09:00Z
Files changed: tests/unit/calendar.test.ts
Notes: Added 40 unit tests covering month params, day params, month response, and day response schemas. Tests valid and invalid inputs for all schemas.
---
---
Story: CAL-005 Create useCalendarMonth hook
Completed: 2026-01-23T21:10:00Z
Files changed: src/hooks/useCalendarMonth.ts
Notes: Hook accepts year, month, and userId. Returns data, loading, error states and refetch function. Re-fetches on dependency change via useCallback.
---
---
Story: CAL-006 Create useCalendarDay hook
Completed: 2026-01-23T21:11:00Z
Files changed: src/hooks/useCalendarDay.ts
Notes: Hook accepts date (string or null) and userId. Only fetches when date is provided. Returns data, loading, error states.
---
---
Story: CAL-007 Create CalendarGrid component
Completed: 2026-01-23T21:12:00Z
Files changed: src/components/calendar/CalendarGrid.tsx
Notes: Renders 7-column grid with M-S headers. Uses date-fns to calculate days including overflow. Accepts renderDay prop for custom day rendering.
---
---
Story: CAL-008 Create CalendarDayCell component
Completed: 2026-01-23T21:13:00Z
Files changed: src/components/calendar/CalendarDayCell.tsx
Notes: Button element with day number, 3 habit dots, Scale icon, Syringe icon. Lime ring on today, hover state, keyboard accessible.
---
---
Story: CAL-009 Create CalendarHeader component
Completed: 2026-01-23T21:14:00Z
Files changed: src/components/calendar/CalendarHeader.tsx
Notes: Shows month/year, prev/next month buttons, Today button. Disables next/today when on current month. Uses date-fns format.
---
---
Story: CAL-010 Create DayDetailDialog component
Completed: 2026-01-23T21:15:00Z
Files changed: src/components/calendar/DayDetailDialog.tsx
Notes: Uses shadcn Dialog, shows full date, relative context, habits with check/x icons, weigh-in with change, injection with site. Loading and empty states.
---
---
Story: CAL-011 Create ProgressCalendar composite component
Completed: 2026-01-23T21:17:00Z
Files changed: src/components/calendar/ProgressCalendar.tsx
Notes: Composes Header, Grid, DayCell, Dialog. Manages month/year and selected day state. Uses useMemo for data lookup maps. Loading skeleton for grid.
---
