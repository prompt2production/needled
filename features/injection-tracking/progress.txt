---
Story: INJ-001 Create Injection database model
Completed: 2026-01-23T14:45:00Z
Files changed: prisma/schema.prisma, prisma/migrations/20260123144357_add_injection_model/migration.sql
Notes: Added InjectionSite enum with 6 body locations and Injection model with user relation. Migration and client generation completed successfully.
---
---
Story: INJ-002 Create injection validation schema
Completed: 2026-01-23T14:47:00Z
Files changed: src/lib/validations/injection.ts, tests/unit/validations/injection.test.ts
Notes: Created Zod validation schema with injectionSiteEnum and createInjectionSchema. 18 tests covering all validation rules.
---
---
Story: INJ-003 Create injection week utilities
Completed: 2026-01-23T14:48:30Z
Files changed: src/lib/injection-week.ts, tests/unit/lib/injection-week.test.ts
Notes: Created utilities for calculating injection week boundaries based on user's injection day preference. 24 tests covering all functions.
---
---
Story: INJ-004 Create site rotation utility
Completed: 2026-01-23T14:50:00Z
Files changed: src/lib/injection-site.ts, tests/unit/lib/injection-site.test.ts
Notes: Created site rotation utilities with SITE_ROTATION_ORDER constant, getNextSite, and getSiteLabel functions. 15 tests covering all functions.
---
---
Story: INJ-005 Create POST /api/injections endpoint
Completed: 2026-01-23T14:51:30Z
Files changed: src/app/api/injections/route.ts, tests/unit/api/injections.test.ts
Notes: Created POST endpoint with validation, user lookup, injection week constraint check based on user's injectionDay, and injection creation.
---
---
Story: INJ-006 Create GET /api/injections endpoint
Completed: 2026-01-23T14:51:30Z
Files changed: src/app/api/injections/route.ts, tests/unit/api/injections.test.ts
Notes: Created GET endpoint with userId parameter, pagination support (limit/offset), and date descending order. Implemented in same file as POST.
---
---
Story: INJ-007 Create GET /api/injections/status endpoint
Completed: 2026-01-23T14:54:30Z
Files changed: src/app/api/injections/status/route.ts, tests/unit/api/injections-status.test.ts
Notes: Created status endpoint returning status (due/done/overdue/upcoming), daysUntil, daysOverdue, lastInjection, and suggestedSite. Status logic uses calendar position relative to injection day.
---
---
Story: INJ-008 Create InjectionSiteSelector component
Completed: 2026-01-23T14:56:00Z
Files changed: src/components/injection/InjectionSiteSelector.tsx
Notes: Created grid-based site selector with 6 options, suggested site highlighting, last used indication, and proper touch targets (min-h-[56px]).
---
---
Story: INJ-009 Create InjectionDialog component
Completed: 2026-01-23T14:57:30Z
Files changed: src/components/injection/InjectionDialog.tsx
Notes: Created Dialog component with InjectionSiteSelector, optional notes textarea, submit/cancel buttons, and loading state handling.
---
---
Story: INJ-010 Create InjectionCard - Due Today state
Completed: 2026-01-23T14:59:00Z
Files changed: src/components/injection/InjectionCard.tsx
Notes: Created InjectionCard with all four states (due, done, overdue, upcoming) in a single component.
---
---
Story: INJ-011 Create InjectionCard - Done state
Completed: 2026-01-23T14:59:00Z
Files changed: src/components/injection/InjectionCard.tsx
Notes: Done state shows Check icon, logged day name, site used, and View History link.
---
---
Story: INJ-012 Create InjectionCard - Overdue state
Completed: 2026-01-23T14:59:00Z
Files changed: src/components/injection/InjectionCard.tsx
Notes: Overdue state shows AlertTriangle icon with amber warning styling and days overdue count.
---
---
Story: INJ-013 Create InjectionCard - Upcoming state
Completed: 2026-01-23T14:59:00Z
Files changed: src/components/injection/InjectionCard.tsx
Notes: Upcoming state shows muted Syringe icon with countdown and injection day name.
---
